# å·¥å…·æ å¯è¾¾æ€§ä¿®å¤

## ğŸ› é—®é¢˜

ä»æˆªå›¾å¯ä»¥çœ‹åˆ°ï¼Œæ“ä½œå·¥å…·æ å‡ºç°åœ¨"ç¬¬ä¸ƒç« :"å¤„ï¼Œä½†ï¼š
1. **è·ç¦»é¼ æ ‡å¤ªè¿œ** - éš¾ä»¥å¿«é€Ÿåˆ°è¾¾
2. **ç«‹å³æ¶ˆå¤±** - é¼ æ ‡ç¦»å¼€èŠ‚ç‚¹æ—¶ç«‹å³éšè—
3. **æ— æ³•ç‚¹å‡»** - ç§»åŠ¨é¼ æ ‡è¿‡ç¨‹ä¸­å·¥å…·æ å°±æ¶ˆå¤±äº†

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. æ·»åŠ å…³é—­å»¶è¿Ÿï¼ˆ500msï¼‰

**ä¿®å¤å‰**ï¼š
```typescript
// âŒ é¼ æ ‡ç¦»å¼€ç«‹å³å…³é—­
const handleMouseLeave = () => {
  setActiveToolbarNodeId(null);
};
```

**ä¿®å¤å**ï¼š
```typescript
// âœ… å»¶è¿Ÿ 500ms å…³é—­ï¼Œç»™ç”¨æˆ·æ—¶é—´ç§»åŠ¨é¼ æ ‡
const handleMouseLeave = () => {
  setTimeout(() => {
    setActiveToolbarNodeId(null);
  }, 500);
};
```

### 2. å·¥å…·æ åŒºåŸŸç¼“å†²

æ·»åŠ  10px ç¼“å†²åŒºï¼Œé¼ æ ‡åœ¨å·¥å…·æ é™„è¿‘æ—¶ä¸ä¼šç«‹å³å…³é—­ï¼š

```typescript
onMouseLeave={(e) => {
  const rect = e.currentTarget.getBoundingClientRect();
  const buffer = 10; // 10px ç¼“å†²åŒº
  
  // åªæœ‰çœŸæ­£ç¦»å¼€ç¼“å†²åŒºæ‰å…³é—­
  if (
    e.clientX < rect.left - buffer ||
    e.clientX > rect.right + buffer ||
    e.clientY < rect.top - buffer ||
    e.clientY > rect.bottom + buffer
  ) {
    onMouseLeave();
  }
}}
```

---

## ğŸ¯ å·¥ä½œåŸç†

### ä¿®å¤å‰
```
é¼ æ ‡æ‚¬åœèŠ‚ç‚¹ 1ç§’
    â†“
å·¥å…·æ å‡ºç°
    â†“
é¼ æ ‡ç¦»å¼€èŠ‚ç‚¹
    â†“
å·¥å…·æ ç«‹å³æ¶ˆå¤± âŒ
    â†“
æ— æ³•ç‚¹å‡»
```

### ä¿®å¤å
```
é¼ æ ‡æ‚¬åœèŠ‚ç‚¹ 1ç§’
    â†“
å·¥å…·æ å‡ºç°
    â†“
é¼ æ ‡ç¦»å¼€èŠ‚ç‚¹
    â†“
ç­‰å¾… 500ms â±ï¸
    â†“
å¦‚æœé¼ æ ‡è¿›å…¥å·¥å…·æ ï¼š
â”œâ”€ å–æ¶ˆå…³é—­
â””â”€ å·¥å…·æ ä¿æŒæ˜¾ç¤º âœ…
    â†“
å¯ä»¥ç‚¹å‡»æŒ‰é’®
```

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœ

| åœºæ™¯ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| é¼ æ ‡ç¦»å¼€èŠ‚ç‚¹ | ç«‹å³æ¶ˆå¤± | 500ms åæ¶ˆå¤± |
| ç§»åŠ¨åˆ°å·¥å…·æ  | æ— æ³•åˆ°è¾¾ | å¯ä»¥åˆ°è¾¾ âœ… |
| ç‚¹å‡»æŒ‰é’® | æ— æ³•ç‚¹å‡» | å¯ä»¥ç‚¹å‡» âœ… |
| ç¼“å†²åŒº | æ—  | 10px ç¼“å†² |

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒæ”¹è¿›

### 1. å»¶è¿Ÿå…³é—­ï¼ˆ500msï¼‰
- ç»™ç”¨æˆ·è¶³å¤Ÿæ—¶é—´ç§»åŠ¨é¼ æ ‡
- ä¸ä¼šå› ä¸ºè½»å¾®ç§»åŠ¨è€Œæ¶ˆå¤±
- æ›´å®¹æ˜“ç‚¹å‡»æŒ‰é’®

### 2. ç¼“å†²åŒºï¼ˆ10pxï¼‰
- é¼ æ ‡åœ¨å·¥å…·æ é™„è¿‘æ—¶ä¸ä¼šå…³é—­
- æ›´å®½å®¹çš„äº¤äº’åŒºåŸŸ
- å‡å°‘è¯¯æ“ä½œ

### 3. æ™ºèƒ½æ£€æµ‹
- åªæœ‰çœŸæ­£ç¦»å¼€æ‰å…³é—­
- é¼ æ ‡åœ¨èŠ‚ç‚¹å’Œå·¥å…·æ ä¹‹é—´ç§»åŠ¨æ—¶ä¿æŒæ˜¾ç¤º
- æ›´è‡ªç„¶çš„äº¤äº’ä½“éªŒ

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### æµ‹è¯• 1ï¼šå¿«é€Ÿç§»åŠ¨åˆ°å·¥å…·æ 
1. æ‚¬åœèŠ‚ç‚¹ 1 ç§’ âœ…
2. å·¥å…·æ å‡ºç° âœ…
3. å¿«é€Ÿç§»åŠ¨é¼ æ ‡åˆ°å·¥å…·æ  âœ…
4. å·¥å…·æ ä¿æŒæ˜¾ç¤º âœ…
5. å¯ä»¥ç‚¹å‡»æŒ‰é’® âœ…

### æµ‹è¯• 2ï¼šæ…¢é€Ÿç§»åŠ¨åˆ°å·¥å…·æ 
1. æ‚¬åœèŠ‚ç‚¹ 1 ç§’ âœ…
2. å·¥å…·æ å‡ºç° âœ…
3. æ…¢é€Ÿç§»åŠ¨é¼ æ ‡åˆ°å·¥å…·æ  âœ…
4. 500ms å†…åˆ°è¾¾ï¼Œå·¥å…·æ ä¸æ¶ˆå¤± âœ…
5. å¯ä»¥ç‚¹å‡»æŒ‰é’® âœ…

### æµ‹è¯• 3ï¼šé¼ æ ‡ç¦»å¼€
1. æ‚¬åœèŠ‚ç‚¹ï¼Œå·¥å…·æ å‡ºç° âœ…
2. é¼ æ ‡ç§»å¼€ï¼ˆä¸å»å·¥å…·æ ï¼‰âœ…
3. 500ms åå·¥å…·æ æ¶ˆå¤± âœ…

---

## ğŸ’¡ è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### 1. è°ƒæ•´å»¶è¿Ÿæ—¶é—´
```typescript
// æ›´é•¿å»¶è¿Ÿï¼ˆ1ç§’ï¼‰
setTimeout(() => setActiveToolbarNodeId(null), 1000);

// æ›´çŸ­å»¶è¿Ÿï¼ˆ300msï¼‰
setTimeout(() => setActiveToolbarNodeId(null), 300);
```

### 2. è°ƒæ•´ç¼“å†²åŒºå¤§å°
```typescript
// æ›´å¤§ç¼“å†²åŒºï¼ˆ20pxï¼‰
const buffer = 20;

// æ›´å°ç¼“å†²åŒºï¼ˆ5pxï¼‰
const buffer = 5;
```

### 3. å·¥å…·æ ä½ç½®ä¼˜åŒ–
```typescript
// æ›´é è¿‘é¼ æ ‡ï¼ˆå‡å°‘è·ç¦»ï¼‰
y: e.clientY + 10  // åŸæ¥æ˜¯ +20

// æ›´è¿œç¦»é¼ æ ‡ï¼ˆé¿å…é®æŒ¡ï¼‰
y: e.clientY + 30
```

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

1. **`components/editor/OutlineNode.tsx`**
   - æ·»åŠ  500ms å…³é—­å»¶è¿Ÿ
   - ä¼˜åŒ– handleMouseLeave é€»è¾‘

2. **`components/editor/OperationToolbar.tsx`**
   - æ·»åŠ  10px ç¼“å†²åŒº
   - æ™ºèƒ½æ£€æµ‹é¼ æ ‡ç¦»å¼€

---

## âœ… éªŒæ”¶æ ‡å‡†

- âœ… é¼ æ ‡ç¦»å¼€èŠ‚ç‚¹å 500ms æ‰å…³é—­å·¥å…·æ 
- âœ… å¯ä»¥é¡ºåˆ©ç§»åŠ¨é¼ æ ‡åˆ°å·¥å…·æ 
- âœ… å¯ä»¥ç‚¹å‡»å·¥å…·æ æŒ‰é’®
- âœ… é¼ æ ‡åœ¨ç¼“å†²åŒºå†…æ—¶å·¥å…·æ ä¸æ¶ˆå¤±
- âœ… çœŸæ­£ç¦»å¼€åå·¥å…·æ æ­£å¸¸å…³é—­

---

**ä¿®å¤å®Œæˆï¼** ğŸ‰ 

ç°åœ¨å·¥å…·æ ï¼š
- âœ… æœ‰ 500ms å»¶è¿Ÿï¼Œå¯ä»¥åˆ°è¾¾
- âœ… æœ‰ 10px ç¼“å†²åŒºï¼Œæ›´å®¹æ˜“ç‚¹å‡»
- âœ… æ™ºèƒ½æ£€æµ‹ï¼Œä½“éªŒæ›´å¥½

